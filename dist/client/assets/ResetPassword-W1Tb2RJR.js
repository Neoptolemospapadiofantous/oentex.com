import{r as t,bh as P,j as e}from"./react-BLSrs4ew.js";import{u as S,I as r,e as k,a as m,b as C}from"./index-Bdeh4hUX.js";import"./heroui-JiUKaMRz.js";const V=()=>{const[o,x]=t.useState(""),[l,w]=t.useState(""),[i,h]=t.useState(!1),[c,p]=t.useState(!1),[u,f]=t.useState(!1),[a,b]=t.useState({}),[g,j]=t.useState(!1),d=P(),{updatePassword:y}=S();t.useEffect(()=>{(async()=>{const{session:n}=await k.getSession();n?j(!0):(m("Invalid or expired reset link"),d("/"))})()},[d]);const N=()=>{const s={};return o.trim()?o.length<6&&(s.password="Password must be at least 6 characters"):s.password="Password is required",l.trim()?o!==l&&(s.confirmPassword="Passwords do not match"):s.confirmPassword="Please confirm your password",b(s),Object.keys(s).length===0},v=async s=>{if(s.preventDefault(),!!N()){f(!0);try{const{error:n}=await y(o);n?m(n.message):(C("Password updated successfully!"),d("/deals"))}catch{m("Failed to update password")}finally{f(!1)}}};return g?e.jsx("div",{className:"min-h-screen flex items-center justify-center py-20",children:e.jsx("div",{className:"max-w-md w-full container-p-md",children:e.jsxs("div",{className:"bg-content1 rounded-2xl container-p-2xl border border-border",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(r.lock,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-foreground mb-3",children:"Set New Password"}),e.jsx("p",{className:"text-foreground/70",children:"Enter your new password below"})]}),e.jsxs("form",{onSubmit:v,className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-3",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(r.lock,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-foreground/70 w-5 h-5"}),e.jsx("input",{type:i?"text":"password",value:o,onChange:s=>x(s.target.value),className:`w-full pl-10 pr-12 container-py-sm bg-background border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all ${a.password?"border-red-500":"border-border"}`,placeholder:"Enter your new password"}),e.jsx("button",{type:"button",onClick:()=>h(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-foreground/70 hover:text-foreground",children:i?e.jsx(r.eyeOff,{className:"w-5 h-5"}):e.jsx(r.eye,{className:"w-5 h-5"})})]}),a.password&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(r.warning,{className:"w-4 h-4 mr-1"}),a.password]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-3",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(r.lock,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-foreground/70 w-5 h-5"}),e.jsx("input",{type:c?"text":"password",value:l,onChange:s=>w(s.target.value),className:`w-full pl-10 pr-12 container-py-sm bg-background border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all ${a.confirmPassword?"border-red-500":"border-border"}`,placeholder:"Confirm your new password"}),e.jsx("button",{type:"button",onClick:()=>p(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-foreground/70 hover:text-foreground",children:c?e.jsx(r.eyeOff,{className:"w-5 h-5"}):e.jsx(r.eye,{className:"w-5 h-5"})})]}),a.confirmPassword&&e.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(r.warning,{className:"w-4 h-4 mr-1"}),a.confirmPassword]})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full bg-gradient-to-r from-primary to-secondary text-white container-py-sm rounded-lg font-medium hover:from-primary/90 hover:to-secondary/90 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:u?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Updating Password..."]}):"Update Password"})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("button",{onClick:()=>d("/"),className:"text-foreground/70 hover:text-primary transition-colors text-sm",children:"Back to Home"})})]})})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-foreground/70",children:"Verifying reset link..."})]})})};export{V as default};
