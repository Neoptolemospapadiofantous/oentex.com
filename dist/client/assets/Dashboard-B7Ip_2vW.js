import{r as y,j as e}from"./react-BLSrs4ew.js";import{u as w,I as t}from"./index-Bdeh4hUX.js";import{c as k}from"./useDealsQuery-DN0f-7FY.js";import"./heroui-JiUKaMRz.js";const A=()=>e.jsx("div",{className:"bg-content1/60 backdrop-blur-xl rounded-3xl container-p-xl border border-divider/30 animate-pulse",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"w-12 h-12 bg-content2 rounded-2xl"}),e.jsx("div",{className:"w-16 h-6 bg-content2 rounded-lg"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"w-20 h-8 bg-content2 rounded-lg"}),e.jsx("div",{className:"w-32 h-4 bg-content2 rounded-md"}),e.jsx("div",{className:"w-28 h-3 bg-content2 rounded-md"})]})]})})}),_=()=>{var g,u,v,p;const{user:n}=w(),l=k(),a=((g=l.data)==null?void 0:g.companies)||[],x=((u=l.data)==null?void 0:u.deals)||[],i=a.filter(r=>r.status==="active").length,m=a.length>0?(a.reduce((r,s)=>r+(s.overall_rating||0),0)/a.length).toFixed(1):"0.0",h=x.length,f=x.filter(r=>r.is_active).length,c=y.useMemo(()=>{const r=a.reduce((s,o)=>{var b;const d=((b=o.category)==null?void 0:b.replace("_"," "))||"Unknown";return s[d]||(s[d]={count:0,totalRating:0}),s[d].count+=1,s[d].totalRating+=o.overall_rating||0,s},{});return Object.entries(r).map(([s,o])=>({category:s,count:o.count,avgRating:o.count>0?o.totalRating/o.count:0,percentage:Math.round(o.count/a.length*100)})).sort((s,o)=>o.count-s.count)},[a]),j=c.slice(0,3),N=[{title:"Total Platforms",value:a.length.toString(),change:`${i} active`,icon:t.users,iconBg:"from-blue-500 to-indigo-600",description:"Trading platforms in database",color:"text-blue-600"},{title:"Active Platforms",value:i.toString(),change:`${Math.round(i/Math.max(a.length,1)*100)}% active`,icon:t.users,iconBg:"from-emerald-500 to-green-600",description:"Currently operational",color:"text-emerald-600"},{title:"Total Deals",value:h.toString(),change:`${f} active`,icon:t.gift,iconBg:"from-purple-500 to-violet-600",description:"Available promotions",color:"text-purple-600"},{title:"Avg Rating",value:m,change:"High quality",icon:t.star,iconBg:"from-amber-500 to-yellow-600",description:"Platform satisfaction",color:"text-amber-600"}];return l.isLoading?e.jsx("div",{className:"min-h-screen",children:e.jsxs("div",{className:"container-page section-py-xl",children:[e.jsxs("div",{className:"text-center mb-2xl",children:[e.jsx("div",{className:"w-64 h-8 bg-content2 rounded-lg mx-auto mb-lg animate-pulse"}),e.jsx("div",{className:"w-48 h-6 bg-content2 rounded-lg mx-auto animate-pulse"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-lg lg:gap-xl mb-2xl",children:[...Array(4)].map((r,s)=>e.jsx(A,{},s))}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-xl",children:[e.jsx("div",{className:"xl:col-span-2 space-y-xl",children:e.jsx("div",{className:"bg-content1/60 backdrop-blur-xl rounded-3xl container-p-2xl border border-divider/30",children:e.jsxs("div",{className:"space-y-lg",children:[e.jsx("div",{className:"w-48 h-6 bg-content2 rounded-lg animate-pulse"}),e.jsx("div",{className:"w-32 h-4 bg-content2 rounded-lg animate-pulse"}),e.jsx("div",{className:"space-y-md mt-xl",children:[...Array(3)].map((r,s)=>e.jsx("div",{className:"w-full h-16 bg-content2 rounded-2xl animate-pulse"},s))})]})})}),e.jsx("div",{className:"space-y-xl",children:e.jsx("div",{className:"bg-content1/60 backdrop-blur-xl rounded-3xl container-p-xl border border-divider/30",children:e.jsxs("div",{className:"space-y-lg",children:[e.jsx("div",{className:"w-32 h-6 bg-content2 rounded-lg animate-pulse"}),e.jsx("div",{className:"w-24 h-4 bg-content2 rounded-lg animate-pulse"}),e.jsx("div",{className:"space-y-md mt-lg",children:[...Array(3)].map((r,s)=>e.jsx("div",{className:"w-full h-12 bg-content2 rounded-xl animate-pulse"},s))})]})})})]})]})}):l.isError?e.jsx("div",{className:"min-h-screen",children:e.jsx("div",{className:"container-page section-py-xl",children:e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-3xl flex items-center justify-center mb-2xl shadow-2xl shadow-red-500/20",children:e.jsx(t.warning,{className:"w-10 h-10 text-white"})}),e.jsx("h2",{className:"text-3xl font-bold gradient-text mb-lg",children:"Failed to load dashboard"}),e.jsx("p",{className:"text-xl text-foreground/70 mb-2xl max-w-lg mx-auto",children:"There was an error loading your dashboard data. Please try refreshing the page."}),e.jsxs("button",{onClick:()=>l.refetch(),className:"px-2xl py-lg bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-white rounded-2xl font-semibold text-lg transition-all duration-300 hover:scale-105 hover:shadow-2xl hover:shadow-primary/25",children:[e.jsx(t.refresh,{className:"w-5 h-5 mr-sm inline"}),"Try Again"]})]})})})}):e.jsx("div",{className:"min-h-screen",children:e.jsxs("div",{className:"container-page section-py-xl",children:[e.jsxs("div",{className:"text-center mb-2xl",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold gradient-text mb-lg",children:"Trading Platform Dashboard"}),e.jsx("p",{className:"text-lg text-foreground/70 mb-sm",children:"Real-time insights and analytics"}),e.jsxs("p",{className:"text-sm text-foreground/60",children:["Welcome back, ",((v=n==null?void 0:n.user_metadata)==null?void 0:v.full_name)||((p=n==null?void 0:n.email)==null?void 0:p.split("@")[0])||"User"]})]}),e.jsx("section",{className:"mb-2xl",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-lg lg:gap-xl",children:N.map(r=>e.jsx("div",{className:"group relative overflow-hidden bg-content1/80 backdrop-blur-2xl rounded-3xl container-px-2xl container-py-lg border border-divider/40 hover:border-primary/30 transition-all duration-500 hover:shadow-2xl hover:shadow-primary/10 transform hover:scale-[1.02]",children:e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-start justify-between mb-lg",children:[e.jsx("div",{className:"relative",children:e.jsx("div",{className:`w-14 h-14 bg-gradient-to-br ${r.iconBg} rounded-2xl flex items-center justify-center shadow-lg transition-all duration-300 group-hover:scale-110 group-hover:rotate-3`,children:e.jsx(r.icon,{className:"w-7 h-7 text-white"})})}),e.jsx("div",{className:"text-xs font-semibold container-px-sm container-py-xs rounded-lg bg-success/20 text-success border border-success/30",children:r.change})]}),e.jsxs("div",{className:"space-y-sm",children:[e.jsx("h3",{className:`text-4xl font-bold ${r.color} group-hover:text-primary transition-colors duration-300 tracking-tight`,children:r.value}),e.jsx("p",{className:"text-base font-semibold text-foreground group-hover:text-foreground transition-colors duration-300",children:r.title}),e.jsx("p",{className:"text-sm text-foreground/60 leading-relaxed",children:r.description})]})]})},r.title))})}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-2xl",children:[e.jsxs("div",{className:"xl:col-span-2 space-y-2xl",children:[e.jsx("div",{className:"bg-content1/90 backdrop-blur-2xl rounded-3xl border border-divider/50 container-p-2xl hover:shadow-2xl hover:shadow-primary/5 transition-all duration-500 group overflow-hidden relative",children:e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2xl",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-sm group-hover:text-primary transition-colors duration-300",children:"Platform Overview"}),e.jsx("p",{className:"text-foreground/60",children:"Trading platform statistics and metrics"})]}),e.jsx(t.database,{className:"w-8 h-8 text-primary/60 group-hover:text-primary transition-colors duration-300"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-lg mb-2xl",children:[e.jsxs("div",{className:"text-center container-p-lg bg-content2/50 rounded-2xl backdrop-blur-sm border border-divider/30 hover:border-primary/30 transition-all duration-300 hover:shadow-lg hover:shadow-primary/10",children:[e.jsx("div",{className:"text-3xl font-bold text-primary mb-sm",children:a.length}),e.jsx("div",{className:"text-sm text-foreground/60 font-medium",children:"Total Platforms"})]}),e.jsxs("div",{className:"text-center container-p-lg bg-content2/50 rounded-2xl backdrop-blur-sm border border-divider/30 hover:border-secondary/30 transition-all duration-300 hover:shadow-lg hover:shadow-secondary/10",children:[e.jsx("div",{className:"text-3xl font-bold text-secondary mb-sm",children:h}),e.jsx("div",{className:"text-sm text-foreground/60 font-medium",children:"Total Deals"})]}),e.jsxs("div",{className:"text-center container-p-lg bg-content2/50 rounded-2xl backdrop-blur-sm border border-divider/30 hover:border-warning/30 transition-all duration-300 hover:shadow-lg hover:shadow-warning/10",children:[e.jsx("div",{className:"text-3xl font-bold text-warning mb-sm",children:m}),e.jsx("div",{className:"text-sm text-foreground/60 font-medium",children:"Avg Rating"})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2xl",children:[e.jsxs("div",{className:"flex items-center gap-md",children:[e.jsx("div",{className:"w-3 h-3 bg-success rounded-full animate-pulse"}),e.jsxs("span",{className:"text-sm font-medium text-foreground/80",children:[i," Active Platforms"]})]}),e.jsxs("button",{className:"text-primary hover:text-primary/80 text-sm font-medium flex items-center gap-sm transition-all duration-200 hover:gap-md",children:["View All ",e.jsx(t.arrowRight,{className:"w-4 h-4"})]})]})]})}),e.jsx("div",{className:"bg-content1/90 backdrop-blur-2xl my-2xl rounded-3xl border border-divider/50 container-p-2xl hover:shadow-2xl hover:shadow-secondary/5 transition-all duration-500 group overflow-hidden relative",children:e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2xl",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-sm group-hover:text-secondary transition-colors duration-300",children:"Category Distribution"}),e.jsx("p",{className:"text-foreground/60",children:"Platform categories and performance metrics"})]}),e.jsx(t.chart,{className:"w-8 h-8 text-secondary/60 group-hover:text-secondary transition-colors duration-300"})]}),e.jsx("div",{className:"space-y-lg",children:c.map(r=>e.jsxs("div",{className:"hover:bg-content2/30 rounded-2xl container-p-lg transition-all duration-300 hover:shadow-lg hover:shadow-secondary/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-sm",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-foreground capitalize hover:text-secondary transition-colors duration-200",children:r.category}),e.jsxs("p",{className:"text-sm text-foreground/60",children:[r.count," platforms • ",r.avgRating.toFixed(1)," avg rating"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xl font-bold text-primary",children:[r.percentage,"%"]}),e.jsx("div",{className:"text-xs text-foreground/50",children:"of total"})]})]}),e.jsx("div",{className:"w-full bg-content2/60 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-secondary to-primary rounded-full transition-all duration-1000 ease-out",style:{width:`${r.percentage}%`}})})]},r.category))})]})})]}),e.jsxs("div",{className:"space-y-2xl",children:[e.jsx("div",{className:"bg-content1/90 backdrop-blur-2xl rounded-3xl border border-divider/50 container-p-xl hover:shadow-2xl hover:shadow-primary/5 transition-all duration-500 group overflow-hidden relative",children:e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2xl",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-foreground mb-sm group-hover:text-primary transition-colors duration-300",children:"Top Categories"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Most popular platform types"})]}),e.jsx(t.trophy,{className:"w-6 h-6 text-warning/60 group-hover:text-warning transition-colors duration-300"})]}),e.jsx("div",{className:"space-y-md",children:j.map((r,s)=>e.jsxs("div",{className:"flex items-center justify-between container-p-md rounded-2xl bg-content2/30 hover:bg-content2/50 transition-all duration-300 hover:shadow-lg hover:shadow-primary/5",children:[e.jsxs("div",{className:"flex items-center gap-md",children:[e.jsx("div",{className:`w-8 h-8 rounded-xl flex items-center justify-center text-sm font-bold transition-all duration-300 ${s===0?"bg-gradient-to-br from-warning/30 to-warning/20 text-warning":s===1?"bg-gradient-to-br from-default-300/30 to-default-300/20 text-default-600":"bg-gradient-to-br from-default-200/30 to-default-200/20 text-default-500"}`,children:s+1}),e.jsx("span",{className:"font-medium text-foreground capitalize hover:text-primary transition-colors duration-200",children:r.category})]}),e.jsxs("div",{className:"text-sm font-semibold text-primary",children:[r.count," platforms"]})]},r.category))}),c.length>3&&e.jsx("div",{className:"mt-lg pt-lg border-t border-divider/30",children:e.jsx("button",{className:"w-full text-center text-sm text-primary hover:text-primary/80 font-medium transition-colors duration-200",children:"View All Categories"})})]})}),e.jsx("div",{className:"bg-content1/90 backdrop-blur-2xl my-2xl rounded-3xl border border-divider/50 container-p-xl hover:shadow-2xl hover:shadow-primary/5 transition-all duration-500 group overflow-hidden relative",children:e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"mb-2xl",children:[e.jsx("h2",{className:"text-xl font-bold text-foreground mb-sm group-hover:text-secondary transition-colors duration-300",children:"Quick Actions"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Manage your dashboard"})]}),e.jsxs("div",{className:"space-y-sm",children:[e.jsxs("button",{className:"w-full flex items-center gap-md container-p-md bg-content2/30 hover:bg-primary/10 rounded-2xl transition-all duration-300 group/action hover:shadow-lg hover:shadow-primary/10",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary/20 to-primary/10 rounded-xl flex items-center justify-center group-hover/action:scale-110 transition-transform duration-200",children:e.jsx(t.add,{className:"w-5 h-5 text-primary"})}),e.jsx("span",{className:"font-medium text-foreground group-hover/action:text-primary transition-colors duration-200",children:"Add New Platform"})]}),e.jsxs("button",{className:"w-full flex items-center gap-md container-p-md bg-content2/30 hover:bg-secondary/10 rounded-2xl transition-all duration-300 group/action hover:shadow-lg hover:shadow-secondary/10",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-secondary/20 to-secondary/10 rounded-xl flex items-center justify-center group-hover/action:scale-110 transition-transform duration-200",children:e.jsx(t.refresh,{className:"w-5 h-5 text-secondary"})}),e.jsx("span",{className:"font-medium text-foreground group-hover/action:text-secondary transition-colors duration-200",children:"Refresh Data"})]})]})]})})]})]})]})})};export{_ as default};
