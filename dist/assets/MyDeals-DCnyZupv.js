import{M as F,V as H,r as m,j as e,S as k,aU as S,X as V,Z as J}from"./index-q1shbo1Y.js";import{u as K,a as X}from"./useDealsQuery-DE1_uq8W.js";import{u as Z,b as ee,D as Q,B as $,G as te}from"./useCategoriesQuery-DpmMe7TM.js";import{R as se}from"./RatingModal-DkEHPb_J.js";import{E as ae}from"./eye-off-BzFpDqmh.js";import{E as re}from"./eye-D1TDm-Nb.js";import{A as le}from"./award-DKXjnXy_.js";import{P as ne}from"./pen-line-DTeoSVn4.js";import{U as oe}from"./users-e8sdiW7p.js";import"./useQuery-BB20afus.js";import"./features-animation-DNaSG913.js";import"./index-IXNqEob0.js";import"./trending-up-BGKrBkKk.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=F("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=F("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=F("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),me=[{value:"all",label:"All Types"},{value:"quick",label:"Quick Rating"},{value:"categories",label:"Detailed Rating"},{value:"overall",label:"Overall Rating"}],xe=[{value:"date",label:"Date"},{value:"rating",label:"Rating"},{value:"name",label:"Name"}],ge=x=>{var j;const l=K(),d=((j=l.data)==null?void 0:j.companies)||[],g=m.useMemo(()=>d.map(b=>b.id).filter(Boolean),[d]),o=X(x,g);return{ratings:m.useMemo(()=>{if(!o.data||!d.length)return[];const b=[];return o.data.forEach((r,f)=>{const s=d.find(n=>n.id===f);s&&r&&b.push({id:r.id||`${f}-${Date.now()}`,companyId:f,companyName:s.name,companySlug:s.slug||"",category:s.category||"unknown",logo:s.logo_url||"https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=400&h=200&fit=crop",website:s.website_url||"#",overallRating:r.overall_rating||(()=>{if(r.rating_type==="categories"){const n=[r.platform_usability,r.customer_support,r.fees_commissions,r.security_trust,r.educational_resources,r.mobile_app].filter(u=>u!==null&&u>0);return n.length>0?n.reduce((u,i)=>u+i,0)/n.length:0}return 0})(),platformUsability:r.platform_usability||null,customerSupport:r.customer_support||null,feesCommissions:r.fees_commissions||null,securityTrust:r.security_trust||null,educationalResources:r.educational_resources||null,mobileApp:r.mobile_app||null,ratingType:r.rating_type||"quick",ratedAt:new Date(r.created_at||Date.now()).toLocaleDateString(),updatedAt:new Date(r.updated_at||r.created_at||Date.now()).toLocaleDateString(),company:s})}),b},[o.data,d]),isLoading:l.isLoading||o.isLoading,error:l.error||o.error,refetch:()=>{l.refetch(),o.refetch()}}},he=(x,l)=>m.useMemo(()=>{const d=x.length,g=d>0?(x.reduce((s,n)=>s+n.overallRating,0)/d).toFixed(1):"0.0",o=new Set(x.map(s=>s.category)).size,a=new Date;a.setDate(a.getDate()-30);const j=x.filter(s=>new Date(s.ratedAt)>=a).length,b=l.filter(s=>s.value!=="all").map(s=>{const n=x.filter(u=>u.category===s.value);return{category:s.label,count:n.length,avgRating:n.length>0?n.reduce((u,i)=>u+i.overallRating,0)/n.length:0}}).filter(s=>s.count>0),r=[1,2,3,4,5].map(s=>({rating:s,count:x.filter(n=>Math.floor(n.overallRating)===s).length})),f=[];for(let s=5;s>=0;s--){const n=new Date;n.setMonth(n.getMonth()-s);const u=n.toLocaleDateString("en-US",{month:"short",year:"2-digit"}),i=x.filter(R=>{const h=new Date(R.ratedAt);return h.getMonth()===n.getMonth()&&h.getFullYear()===n.getFullYear()});f.push({month:u,ratings:i.length})}return{totalRatings:d,avgRating:g,categoriesRated:o,recentRatings:j,categoryBreakdown:b,ratingDistribution:r,monthlyActivity:f}},[x,l]),ue=(x,l)=>m.useMemo(()=>{let d=x.filter(g=>{const o=l.searchTerm.toLowerCase(),a=o===""||g.companyName.toLowerCase().includes(o)||g.category.toLowerCase().includes(o)||g.ratingType.toLowerCase().includes(o),j=l.selectedCategory==="all"||g.category===l.selectedCategory,b=l.selectedRatingType==="all"||g.ratingType===l.selectedRatingType,r=!l.showDetailed||g.ratingType==="categories";return a&&j&&b&&r});return d.sort((g,o)=>{let a=0;switch(l.sortBy){case"date":a=new Date(o.updatedAt).getTime()-new Date(g.updatedAt).getTime();break;case"rating":a=o.overallRating-g.overallRating;break;case"name":a=g.companyName.localeCompare(o.companyName);break}return l.sortOrder==="desc"?a:-a}),d},[x,l]),De=()=>{var E,B;const{user:x}=H(),l=Z(),d=l.data||[],[g,o]=m.useState(!1),[a,j]=m.useState(null),[b,r]=m.useState(!1),[f,s]=m.useState(!1),[n,u]=m.useState(new Set),[i,R]=m.useState({searchTerm:"",selectedCategory:"all",selectedRatingType:"all",sortBy:"date",sortOrder:"desc",showDetailed:!1}),{ratings:h,isLoading:P,error:Y,refetch:C}=ge(x==null?void 0:x.id),p=he(h,d),T=ue(h,i);ee(h).data;const v=m.useCallback((t,y)=>{R(c=>({...c,[t]:y}))},[]),A=m.useCallback(()=>{C(),l.refetch()},[C,l]),W=m.useCallback(t=>{j(t),o(!0)},[]),z=m.useCallback(async()=>{r(!0);try{await C(),o(!1),j(null)}catch(t){console.error("Error refreshing ratings:",t)}finally{r(!1)}},[C]),q=m.useCallback(t=>{u(y=>{const c=new Set(y);return c.has(t)?c.delete(t):c.add(t),c})},[]),G=m.useCallback(()=>{u(new Set)},[]),D=m.useCallback((t,y="w-4 h-4",c=!0)=>{const N=t||0,w=Math.round(N*2)/2;return e.jsxs("div",{className:"flex items-center",children:[[1,2,3,4,5].map(_=>{const O=_<=Math.floor(w),L=_===Math.ceil(w)&&w%1!==0;return e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:`${y} ${O||L?"text-yellow-400":"text-gray-300"}`,fill:O?"currentColor":L?"url(#half-star)":"none",stroke:"currentColor"}),L&&e.jsx("div",{className:"absolute inset-0 overflow-hidden",style:{width:"50%"},children:e.jsx(k,{className:`${y} text-yellow-400`,fill:"currentColor",stroke:"currentColor"})})]},_)}),c&&e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-900",children:N.toFixed(1)}),e.jsx("svg",{width:"0",height:"0",className:"absolute",children:e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-star",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"50%",stopColor:"currentColor"}),e.jsx("stop",{offset:"50%",stopColor:"transparent"})]})})})]})},[]),U=m.useCallback(()=>{R({searchTerm:"",selectedCategory:"all",selectedRatingType:"all",sortBy:"date",sortOrder:"desc",showDetailed:!1})},[]),I=P||l.isLoading,M=Y||l.error;return l.error?e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Q,{className:"w-12 h-12 text-red-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Categories Not Available"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Categories table not found. Please run the SQL script to create the categories table."}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-500 mb-6",children:[e.jsx("p",{children:"• Run the categories SQL in your Supabase SQL editor"}),e.jsx("p",{children:"• Ensure the categories table has data"}),e.jsx("p",{children:"• Check RLS policies allow public read access"})]}),e.jsxs("button",{onClick:A,className:"inline-flex items-center gap-2 bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(S,{className:"w-4 h-4"}),"Retry Connection"]})]})})})}):I?e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"My Ratings"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Loading your platform ratings..."})]}),e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx(S,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading ratings and categories..."})]})})]})}):M?e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx(V,{className:"w-12 h-12 text-red-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Unable to Load Ratings"}),e.jsx("p",{className:"text-gray-600 mb-6",children:M instanceof Error?M.message:"Failed to load your ratings"}),e.jsxs("button",{onClick:A,className:"inline-flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(S,{className:"w-4 h-4"}),"Try Again"]})]})})})}):d.length?e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"My Platform Ratings"}),e.jsx("p",{className:"text-xl text-gray-600 mb-2",children:h.length>0?`You've rated ${h.length} trading platform${h.length!==1?"s":""}`:"Track and manage your platform ratings and reviews"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["All ratings help the trading community make informed decisions • ",d.length-1," categories available"]}),h.length>0&&e.jsx("div",{className:"flex flex-wrap justify-center gap-4",children:e.jsxs("button",{onClick:()=>s(!f),className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[f?e.jsx(ae,{className:"w-4 h-4"}):e.jsx(re,{className:"w-4 h-4"}),f?"Hide":"Show"," Analytics"]})})]}),f&&h.length>0&&e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx($,{className:"w-5 h-5"}),"Rating Analytics"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-3",children:"Category Breakdown"}),e.jsx("div",{className:"space-y-2",children:p.categoryBreakdown.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm text-gray-900",children:t.category}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-gray-600",children:[t.count," rating",t.count!==1?"s":""]}),e.jsxs("div",{className:"flex items-center gap-1",children:[D(t.avgRating,"w-3 h-3",!1),e.jsx("span",{className:"text-xs font-medium ml-1",children:t.avgRating.toFixed(1)})]})]})]},t.category))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-3",children:"Rating Distribution"}),e.jsx("div",{className:"space-y-2",children:p.ratingDistribution.filter(t=>t.count>0).map(t=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsxs("span",{className:"text-sm text-gray-900",children:[t.rating," star",t.rating!==1?"s":""]}),e.jsxs("span",{className:"text-xs text-gray-600",children:[t.count," rating",t.count!==1?"s":""]})]},t.rating))})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-3",children:"Monthly Activity"}),e.jsx("div",{className:"flex items-end gap-2 h-20",children:p.monthlyActivity.map(t=>e.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[e.jsx("div",{className:"w-full bg-blue-100 rounded-t flex items-end justify-center min-h-4",style:{height:`${Math.max(20,t.ratings/Math.max(...p.monthlyActivity.map(y=>y.ratings))*60)}px`},children:t.ratings>0&&e.jsx("span",{className:"text-xs text-blue-600 font-medium mb-1",children:t.ratings})}),e.jsx("span",{className:"text-xs text-gray-600 mt-2",children:t.month})]},t.month))})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500/10 to-blue-600/10 p-6 rounded-xl border border-blue-500/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(k,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:p.totalRatings}),e.jsx("div",{className:"text-gray-600 text-sm",children:"Total Ratings"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-500/10 to-green-600/10 p-6 rounded-xl border border-green-500/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(le,{className:"w-6 h-6 text-green-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:p.avgRating}),e.jsx("div",{className:"text-gray-600 text-sm",children:"Avg Rating"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-500/10 to-purple-600/10 p-6 rounded-xl border border-purple-500/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($,{className:"w-6 h-6 text-purple-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:p.categoriesRated}),e.jsx("div",{className:"text-gray-600 text-sm",children:"Categories"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-500/10 to-orange-600/10 p-6 rounded-xl border border-orange-500/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(de,{className:"w-6 h-6 text-orange-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:p.recentRatings}),e.jsx("div",{className:"text-gray-600 text-sm",children:"Recent (30d)"})]})]})})]}),h.length===0?e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-12 text-center",children:[e.jsx(k,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No ratings yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You haven't rated any trading platforms yet. Start by rating platforms you've used to help the community make informed decisions."}),e.jsx("button",{onClick:()=>window.location.href="/deals",className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-lg font-medium hover:shadow-lg transition-all duration-300",children:"Browse Platforms to Rate"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Filter Your Ratings (",T.length," of ",h.length,")"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[n.size>0&&e.jsxs("button",{onClick:G,className:"text-sm px-3 py-1 rounded-lg bg-gray-50 border border-gray-200 text-gray-600 hover:text-gray-900 transition-colors",children:["Clear (",n.size,")"]}),(i.searchTerm||i.selectedCategory!=="all"||i.selectedRatingType!=="all"||i.showDetailed)&&e.jsx("button",{onClick:U,className:"text-sm px-3 py-1 rounded-lg bg-gray-50 border border-gray-200 text-gray-600 hover:text-gray-900 transition-colors",children:"Clear Filters"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(J,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search platforms...",value:i.searchTerm,onChange:t=>v("searchTerm",t.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none text-gray-900"})]}),e.jsx("select",{value:i.selectedCategory,onChange:t=>v("selectedCategory",t.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none text-gray-900",children:d.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))}),e.jsx("select",{value:i.selectedRatingType,onChange:t=>v("selectedRatingType",t.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none text-gray-900",children:me.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))}),e.jsx("select",{value:i.sortBy,onChange:t=>v("sortBy",t.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none text-gray-900",children:xe.map(t=>e.jsxs("option",{value:t.value,children:["Sort by ",t.label]},t.value))}),e.jsx("button",{onClick:()=>v("sortOrder",i.sortOrder==="asc"?"desc":"asc"),className:"px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg hover:bg-gray-100 transition-colors flex items-center justify-center",title:`Sort ${i.sortOrder==="asc"?"Descending":"Ascending"}`,children:i.sortOrder==="asc"?e.jsx(ce,{className:"w-5 h-5"}):e.jsx(ie,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[d.map(t=>{const y=t.icon||te,c=i.selectedCategory===t.value,N=t.value==="all"?h.length:h.filter(w=>w.category===t.value).length;return e.jsxs("button",{onClick:()=>v("selectedCategory",t.value),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${c?"bg-blue-600 text-white":"bg-gray-50 text-gray-600 hover:bg-gray-100 hover:text-gray-900 border border-gray-200"}`,children:[e.jsx(y,{className:"w-4 h-4"}),t.label,e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${c?"bg-white/20":"bg-gray-200"}`,children:N})]},t.value)}),e.jsx("div",{className:"ml-auto flex items-center gap-2",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("input",{type:"checkbox",checked:i.showDetailed,onChange:t=>v("showDetailed",t.target.checked),className:"rounded border-gray-300"}),"Detailed only"]})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12",children:T.map(t=>{var y;return e.jsxs("div",{className:"group bg-white rounded-2xl border border-gray-200 hover:border-blue-300 transition-all duration-300 hover:shadow-xl hover:-translate-y-1 overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-4 left-4 z-10",children:e.jsx("input",{type:"checkbox",checked:n.has(t.id),onChange:()=>q(t.id),className:"w-4 h-4 rounded border-gray-300 bg-white/90"})}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t.logo,alt:t.companyName,className:"w-full h-48 object-cover",onError:c=>{const N=c.target;N.src="https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=400&h=200&fit=crop"}}),e.jsx("div",{className:"absolute top-4 right-4 bg-white bg-opacity-90 backdrop-blur-sm rounded-lg px-3 py-2",children:D(t.overallRating,"w-4 h-4")}),e.jsx("div",{className:"absolute bottom-4 left-4",children:e.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700 capitalize",children:[t.ratingType," Rating"]})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"px-3 py-1 bg-blue-50 text-blue-700 text-xs font-medium rounded-full capitalize",children:(y=t.category)==null?void 0:y.replace("_"," ")}),e.jsx("span",{className:"text-sm text-gray-500",children:t.ratedAt})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 group-hover:text-blue-600 transition-colors",children:t.companyName}),t.ratingType==="categories"&&e.jsx("div",{className:"space-y-2 mb-4",children:[{key:"platformUsability",label:"Platform",value:t.platformUsability},{key:"customerSupport",label:"Support",value:t.customerSupport},{key:"feesCommissions",label:"Fees",value:t.feesCommissions},{key:"securityTrust",label:"Security",value:t.securityTrust}].filter(c=>c.value!==null&&c.value>0).slice(0,4).map(c=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-500",children:c.label}),D(c.value,"w-3 h-3",!1)]},c.key))}),e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["Updated ",t.updatedAt]}),e.jsx("button",{onClick:()=>W(t),disabled:b,className:"bg-white hover:bg-gray-50 border border-gray-200 hover:border-blue-300 text-gray-900 font-medium py-2 px-4 rounded-xl transition-all duration-300 hover:shadow-md disabled:opacity-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:b?"Updating...":"Edit"})]})})]})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none rounded-2xl"})]},t.id)})}),T.length===0&&h.length>0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No ratings found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Try adjusting your search or filter criteria"}),e.jsx("button",{onClick:U,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Clear Filters"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-8 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx(oe,{className:"w-6 h-6 text-blue-600"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Your Trading Journey"})]}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto mb-4",children:p.totalRatings>0?`You've contributed ${p.totalRatings} rating${p.totalRatings!==1?"s":""} to help fellow traders make informed decisions.`:"Start rating platforms to build your trading profile and help the community."}),p.categoryBreakdown.length>0&&e.jsx("div",{className:"flex justify-center gap-4 text-sm",children:p.categoryBreakdown.slice(0,3).map(t=>e.jsxs("span",{className:"text-blue-600",children:[t.category,": ",t.avgRating.toFixed(1),"/5"]},t.category))})]})]}),g&&a&&e.jsx(se,{isOpen:g,onClose:()=>{o(!1),j(null)},companyId:a.companyId,companyName:a.companyName,existingRating:{overall_rating:a.overallRating,platform_usability:a.platformUsability,customer_support:a.customerSupport,fees_commissions:a.feesCommissions,security_trust:a.securityTrust,educational_resources:a.educationalResources,mobile_app:a.mobileApp,rating_type:a.ratingType,created_at:a.ratedAt,updated_at:a.updatedAt},onRatingSubmitted:z,companyRating:{averageRating:((E=a.company)==null?void 0:E.overall_rating)||0,totalRatings:((B=a.company)==null?void 0:B.total_reviews)||0}})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Q,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Categories Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The categories table exists but contains no data. Please add categories to the database."}),e.jsxs("button",{onClick:A,className:"inline-flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(S,{className:"w-4 h-4"}),"Reload Categories"]})]})})})})};export{De as default};
