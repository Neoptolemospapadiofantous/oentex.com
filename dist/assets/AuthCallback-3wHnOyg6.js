import{a4 as w,bh as y,r as h,j as e,bi as p,bj as b,W as m}from"./index-q1shbo1Y.js";const N=()=>{const a=w(),[r]=y(),[o,t]=h.useState(null);return h.useEffect(()=>{(async()=>{var c,l,d;try{const u=r.get("error"),x=r.get("error_code"),s=r.get("error_description");if(u){if(x==="unexpected_failure"&&(s!=null&&s.includes("email"))){t("Microsoft email access required. Please verify your email at account.microsoft.com or try Google sign-in.");return}t("Authentication failed. Please try again.");return}const n=r.get("redirect_to")||((c=b.auth)==null?void 0:c.redirectPath)||"/dashboard",g=r.get("code");if(g){const{error:i}=await m.auth.exchangeCodeForSession(g);if(i){if((l=i.message)!=null&&l.includes("email")&&((d=i.message)!=null&&d.includes("external provider"))){t("Microsoft email access required. Please verify your email at account.microsoft.com or try Google sign-in.");return}t("Authentication failed. Please try again.");return}a(n,{replace:!0});return}if(window.location.hash.includes("access_token")){window.history.replaceState&&window.history.replaceState(null,"",window.location.pathname),a(n,{replace:!0});return}const{data:f}=await m.auth.getSession();if(f.session){a(n,{replace:!0});return}t("Please try signing in again.")}catch{t("Something went wrong. Please try again.")}})()},[a,r]),o?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Sign-in Failed"}),e.jsx("p",{className:"text-gray-600 mb-6",children:o}),e.jsx("button",{onClick:()=>a("/",{replace:!0}),className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[e.jsx(p,{className:"mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Signing you in..."})]})})};export{N as default};
