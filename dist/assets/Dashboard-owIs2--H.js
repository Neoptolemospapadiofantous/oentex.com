import{b2 as ee,r as D,t as Q,y as ae,n as se,bk as te,C as re,D as le,E as ie,L as ne,G as oe,bl as ce,H as L,I as U,J as de,j as e,V as me,aU as ue,T as b,U as g,O as $,S as k,N as P,a1 as S,bg as fe}from"./index-q1shbo1Y.js";import{u as xe}from"./useDealsQuery-DE1_uq8W.js";import{U as R}from"./users-e8sdiW7p.js";import{T as W}from"./trending-up-BGKrBkKk.js";import{A as pe}from"./award-DKXjnXy_.js";import{a as he}from"./useQuery-BB20afus.js";import{$ as be,c as T}from"./useLabel-Cw3ck_y7.js";import{c as B}from"./chunk-IHOGUXIG-B7k9bFb3.js";let O=new Map,V=!1;try{V=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let z=!1;try{z=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const Z={degree:{narrow:{default:"°","ja-JP":" 度","zh-TW":"度","sl-SI":" °"}}};class ge{format(a){let s="";if(!V&&this.options.signDisplay!=null?s=je(this.numberFormatter,this.options.signDisplay,a):s=this.numberFormatter.format(a),this.options.style==="unit"&&!z){var i;let{unit:l,unitDisplay:n="short",locale:c}=this.resolvedOptions();if(!l)return s;let d=(i=Z[l])===null||i===void 0?void 0:i[n];s+=d[c]||d.default}return s}formatToParts(a){return this.numberFormatter.formatToParts(a)}formatRange(a,s){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(a,s);if(s<a)throw new RangeError("End date must be >= start date");return`${this.format(a)} – ${this.format(s)}`}formatRangeToParts(a,s){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(a,s);if(s<a)throw new RangeError("End date must be >= start date");let i=this.numberFormatter.formatToParts(a),l=this.numberFormatter.formatToParts(s);return[...i.map(n=>({...n,source:"startRange"})),{type:"literal",value:" – ",source:"shared"},...l.map(n=>({...n,source:"endRange"}))]}resolvedOptions(){let a=this.numberFormatter.resolvedOptions();return!V&&this.options.signDisplay!=null&&(a={...a,signDisplay:this.options.signDisplay}),!z&&this.options.style==="unit"&&(a={...a,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),a}constructor(a,s={}){this.numberFormatter=ve(a,s),this.options=s}}function ve(r,a={}){let{numberingSystem:s}=a;if(s&&r.includes("-nu-")&&(r.includes("-u-")||(r+="-u-"),r+=`-nu-${s}`),a.style==="unit"&&!z){var i;let{unit:c,unitDisplay:d="short"}=a;if(!c)throw new Error('unit option must be provided with style: "unit"');if(!(!((i=Z[c])===null||i===void 0)&&i[d]))throw new Error(`Unsupported unit ${c} with unitDisplay = ${d}`);a={...a,style:"decimal"}}let l=r+(a?Object.entries(a).sort((c,d)=>c[0]<d[0]?-1:1).join():"");if(O.has(l))return O.get(l);let n=new Intl.NumberFormat(r,a);return O.set(l,n),n}function je(r,a,s){if(a==="auto")return r.format(s);if(a==="never")return r.format(Math.abs(s));{let i=!1;if(a==="always"?i=s>0||Object.is(s,0):a==="exceptZero"&&(Object.is(s,-0)||Object.is(s,0)?s=Math.abs(s):i=s>0),i){let l=r.format(-s),n=r.format(s),c=l.replace(n,"").replace(/\u200e|\u061C/,"");return[...c].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),l.replace(n,"!!!").replace(c,"+").replace("!!!",n)}else return r.format(s)}}function ye(r={}){let{locale:a}=ee();return D.useMemo(()=>new ge(a,r),[a,r])}var H=Q({slots:{base:"flex flex-col gap-2 w-full",label:"",labelWrapper:"flex justify-between",value:"",track:"z-0 relative bg-default-300/50 overflow-hidden rtl:rotate-180",indicator:"h-full"},variants:{color:{default:{indicator:"bg-default-400"},primary:{indicator:"bg-primary"},secondary:{indicator:"bg-secondary"},success:{indicator:"bg-success"},warning:{indicator:"bg-warning"},danger:{indicator:"bg-danger"}},size:{sm:{label:"text-small",value:"text-small",track:"h-1"},md:{label:"text-medium",value:"text-medium",track:"h-3"},lg:{label:"text-large",value:"text-large",track:"h-5"}},radius:{none:{track:"rounded-none",indicator:"rounded-none"},sm:{track:"rounded-small",indicator:"rounded-small"},md:{track:"rounded-medium",indicator:"rounded-medium"},lg:{track:"rounded-large",indicator:"rounded-large"},full:{track:"rounded-full",indicator:"rounded-full"}},isStriped:{true:{indicator:"bg-stripe-gradient-default bg-stripe-size"}},isIndeterminate:{true:{indicator:["absolute","w-full","origin-left","animate-indeterminate-bar"]}},isDisabled:{true:{base:"opacity-disabled cursor-not-allowed"}},disableAnimation:{true:{},false:{indicator:"transition-transform !duration-500"}}},defaultVariants:{color:"primary",size:"md",radius:"full",isStriped:!1,isIndeterminate:!1,isDisabled:!1},compoundVariants:[{disableAnimation:!0,isIndeterminate:!1,class:{indicator:"!transition-none motion-reduce:transition-none"}},{color:"primary",isStriped:!0,class:{indicator:"bg-stripe-gradient-primary bg-stripe-size"}},{color:"secondary",isStriped:!0,class:{indicator:"bg-stripe-gradient-secondary bg-stripe-size"}},{color:"success",isStriped:!0,class:{indicator:"bg-stripe-gradient-success bg-stripe-size"}},{color:"warning",isStriped:!0,class:{indicator:"bg-stripe-gradient-warning bg-stripe-size"}},{color:"danger",isStriped:!0,class:{indicator:"bg-stripe-gradient-danger bg-stripe-size"}}]},{twMerge:!0});Q({slots:{base:"flex flex-col justify-center gap-1 max-w-fit items-center",label:"",svgWrapper:"relative block",svg:"z-0 relative overflow-hidden",track:"h-full stroke-default-300/50",indicator:"h-full stroke-current",value:"absolute font-normal inset-0 flex items-center justify-center"},variants:{color:{default:{svg:"text-default-400"},primary:{svg:"text-primary"},secondary:{svg:"text-secondary"},success:{svg:"text-success"},warning:{svg:"text-warning"},danger:{svg:"text-danger"}},size:{sm:{svg:"w-8 h-8",label:"text-small",value:"text-[0.5rem]"},md:{svg:"w-10 h-10",label:"text-small",value:"text-[0.55rem]"},lg:{svg:"w-12 h-12",label:"text-medium",value:"text-[0.6rem]"}},isIndeterminate:{true:{svg:"animate-spinner-ease-spin"}},isDisabled:{true:{base:"opacity-disabled cursor-not-allowed"}},disableAnimation:{true:{},false:{indicator:"transition-all !duration-500"}}},defaultVariants:{color:"primary",size:"md",isDisabled:!1},compoundVariants:[{disableAnimation:!0,isIndeterminate:!1,class:{svg:"!transition-none motion-reduce:transition-none"}}]});function Ne(r){let{value:a=0,minValue:s=0,maxValue:i=100,valueLabel:l,isIndeterminate:n,formatOptions:c={style:"percent"}}=r,d=ae(r,{labelable:!0}),{labelProps:x,fieldProps:f}=be({...r,labelElementType:"span"});a=te(a,s,i);let m=(a-s)/(i-s),u=ye(c);if(!n&&!l){let v=c.style==="percent"?m:a;l=u.format(v)}return{progressBarProps:se(d,{...f,"aria-valuenow":n?void 0:a,"aria-valuemin":s,"aria-valuemax":i,"aria-valuetext":n?void 0:l,role:"progressbar"}),labelProps:x}}function we(r){var a,s;const i=re(),[l,n]=le(r,H.variantKeys),{ref:c,as:d,id:x,className:f,classNames:m,label:u,valueLabel:v,value:j=0,minValue:p=0,maxValue:t=100,showValueLabel:o=!1,formatOptions:h={style:"percent"},...y}=l,K=d||"div",A=ie(c),E=ne(m==null?void 0:m.base,f),[,q]=he({rerender:!0,delay:100}),N=r.isIndeterminate,C=(s=(a=r.disableAnimation)!=null?a:i==null?void 0:i.disableAnimation)!=null?s:!1,{progressBarProps:_,labelProps:M}=Ne({id:x,label:u,value:j,minValue:p,maxValue:t,valueLabel:v,formatOptions:h,isIndeterminate:N,"aria-labelledby":r["aria-labelledby"],"aria-label":r["aria-label"]}),w=D.useMemo(()=>H({...n,disableAnimation:C}),[oe(n),C]),I=C?!0:q,G=D.useMemo(()=>N||!I?void 0:ce((j-p)/(t-p)*100),[I,N,j,p,t]),X=D.useCallback((F={})=>({ref:A,"data-indeterminate":U(N),"data-disabled":U(r.isDisabled),className:w.base({class:E}),...L(_,y,F)}),[A,w,N,r.isDisabled,E,_,y]),Y=D.useCallback((F={})=>({className:w.label({class:m==null?void 0:m.label}),...L(M,F)}),[w,m,M]);return{Component:K,domRef:A,slots:w,classNames:m,label:u,percentage:G,showValueLabel:o,getProgressBarProps:X,getLabelProps:Y}}var J=de((r,a)=>{const{Component:s,slots:i,classNames:l,label:n,percentage:c,showValueLabel:d,getProgressBarProps:x,getLabelProps:f}=we({...r,ref:a}),m=x(),u=n||d;return e.jsxs(s,{...m,children:[u?e.jsxs("div",{className:i.labelWrapper({class:l==null?void 0:l.labelWrapper}),children:[n&&e.jsx("span",{...f(),children:n}),d&&e.jsx("span",{className:i.value({class:l==null?void 0:l.value}),children:m["aria-valuetext"]})]}):null,e.jsx("div",{className:i.track({class:l==null?void 0:l.track}),children:e.jsx("div",{className:i.indicator({class:l==null?void 0:l.indicator}),style:{transform:`translateX(-${100-(c||0)}%)`}})})]})});J.displayName="HeroUI.Progress";var $e=J;const Se=()=>{var u,v,j,p;const{user:r}=me(),a=xe();(u=a.data)!=null&&u.deals;const s=((v=a.data)==null?void 0:v.companies)||[],i=s.length,l=s.filter(t=>t.status==="active").length,n=s.length>0?(s.reduce((t,o)=>t+(o.overall_rating||0),0)/s.length).toFixed(1):"0.0",c=s.reduce((t,o)=>t+(o.total_reviews||0),0),d=s.filter(t=>t.overall_rating>0).sort((t,o)=>(o.overall_rating||0)-(t.overall_rating||0)).slice(0,4).map(t=>{var o,h;return{id:t.id,name:t.name,category:((o=t.category)==null?void 0:o.replace("_"," "))||"Trading",rating:((h=t.overall_rating)==null?void 0:h.toFixed(1))||"0.0",reviews:t.total_reviews||0,logo:t.logo_url}}),x=s.reduce((t,o)=>{var y;const h=((y=o.category)==null?void 0:y.replace("_"," "))||"Unknown";return t[h]=(t[h]||0)+1,t},{}),f=Object.entries(x).sort(([,t],[,o])=>o-t).map(([t,o])=>({category:t,count:o}));if(a.isLoading)return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Dashboard"}),e.jsx("p",{className:"mt-2 text-default-600",children:"Loading your platform overview..."})]}),e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ue,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-primary"}),e.jsx("p",{className:"text-default-600",children:"Loading dashboard data..."})]})})]});if(a.error)return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Dashboard"}),e.jsx("p",{className:"mt-2 text-default-600",children:"Error loading dashboard data"})]}),e.jsx(b,{children:e.jsxs(g,{className:"text-center p-6",children:[e.jsx("p",{className:"text-danger mb-4",children:"Failed to load dashboard data"}),e.jsx($,{color:"primary",onPress:()=>a.refetch(),children:"Try Again"})]})})]});const m=[{title:"Total Platforms",value:i,subtitle:"Available to rate",icon:R,color:"primary",progress:l/i*100},{title:"Active Platforms",value:l,subtitle:"Currently active",icon:W,color:"success",progress:100},{title:"Total Reviews",value:c.toLocaleString(),subtitle:"Community reviews",icon:pe,color:"warning",progress:Math.min(c/1e3*100,100)},{title:"Avg. Platform Rating",value:n,subtitle:"Overall quality",icon:k,color:"secondary",progress:parseFloat(n)/5*100}];return e.jsxs(P.div,{className:"space-y-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Dashboard"}),e.jsxs("p",{className:"mt-2 text-default-600",children:["Welcome back, ",((j=r==null?void 0:r.user_metadata)==null?void 0:j.full_name)||((p=r==null?void 0:r.email)==null?void 0:p.split("@")[0])||"User","! Here's your platform overview."]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:m.map((t,o)=>e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:o*.1},children:e.jsx(b,{className:"card-hover",children:e.jsxs(g,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-small font-medium text-default-600 mb-1",children:t.title}),e.jsx("p",{className:"text-2xl font-bold",children:t.value}),e.jsx("p",{className:"text-small font-medium text-success mt-1",children:t.subtitle})]}),e.jsx(S,{icon:e.jsx(t.icon,{className:"w-6 h-6"}),className:`bg-${t.color}-100 text-${t.color}`})]}),e.jsx($e,{value:t.progress,color:t.color,size:"sm",className:"mt-2"})]})})},t.title))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.4},children:e.jsxs(b,{className:"h-full",children:[e.jsxs(T,{className:"flex justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Top Rated Platforms"}),e.jsx($,{variant:"light",color:"primary",size:"sm",children:"View All"})]}),e.jsx(g,{children:d.length>0?e.jsx("div",{className:"space-y-4",children:d.map((t,o)=>e.jsx(b,{className:"bg-content2",children:e.jsx(g,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(B,{color:"primary",variant:"solid",size:"sm",children:o+1}),e.jsx(S,{src:t.logo,name:t.name,size:"sm",fallback:e.jsx(W,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium",children:t.name}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.jsx(B,{size:"sm",variant:"flat",color:"default",children:t.category}),e.jsxs("span",{className:"text-small font-medium text-primary",children:[t.reviews," reviews"]})]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(k,{className:"w-4 h-4 text-warning fill-current"}),e.jsx("span",{className:"font-medium",children:t.rating})]})})]})})},t.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(k,{className:"w-8 h-8 mx-auto mb-3 text-default-400"}),e.jsx("p",{className:"text-default-600",children:"No rated platforms yet"})]})})]})}),e.jsx(P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.5},children:e.jsxs(b,{className:"h-full",children:[e.jsx(T,{children:e.jsx("h2",{className:"text-xl font-semibold",children:"Platform Categories"})}),e.jsx(g,{children:f.length>0?e.jsx("div",{className:"space-y-4",children:f.map((t,o)=>e.jsx(b,{className:"bg-content2",children:e.jsx(g,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(S,{icon:e.jsx(R,{className:"w-4 h-4"}),className:`${o%3===0?"bg-primary-100 text-primary":o%3===1?"bg-success-100 text-success":"bg-warning-100 text-warning"}`,size:"sm"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium capitalize",children:t.category}),e.jsx("p",{className:"text-small text-default-600",children:"Trading category"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-lg",children:t.count}),e.jsx("p",{className:"text-small text-default-600",children:"platforms"})]})]})})},o))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(R,{className:"w-8 h-8 mx-auto mb-3 text-default-400"}),e.jsx("p",{className:"text-default-600",children:"No categories available"})]})})]})})]}),e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},children:e.jsxs(b,{className:"bg-gradient-to-br from-primary-50 to-secondary-50 border-primary-200",children:[e.jsx(T,{children:e.jsx("h2",{className:"text-xl font-semibold",children:"Quick Actions"})}),e.jsx(g,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx($,{as:"a",href:"/deals",variant:"flat",color:"primary",className:"h-auto p-4 justify-start",startContent:e.jsx(R,{className:"w-6 h-6"}),children:e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-medium",children:"Browse Platforms"}),e.jsx("p",{className:"text-small text-default-600",children:"Discover and rate trading platforms"})]})}),e.jsx($,{as:"a",href:"/my-deals",variant:"flat",color:"success",className:"h-auto p-4 justify-start",startContent:e.jsx(k,{className:"w-6 h-6"}),children:e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-medium",children:"My Ratings"}),e.jsx("p",{className:"text-small text-default-600",children:"View and manage your platform ratings"})]})}),e.jsx($,{as:"a",href:"/profile",variant:"flat",color:"warning",className:"h-auto p-4 justify-start",startContent:e.jsx(fe,{className:"w-6 h-6"}),children:e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-medium",children:"Profile Settings"}),e.jsx("p",{className:"text-small text-default-600",children:"Manage your account preferences"})]})})]})})]})})]})};export{Se as default};
